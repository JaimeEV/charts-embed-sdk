<!DOCTYPE html>
<html>
  <head>
    <title>Charts Embedded SDK - Authenticated Embedded Chart Demo</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="assets/styles.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
    />
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    
    <meta
      name="google-signin-client_id"
      content="569596223089-pf55ivsj1mg4ncks7p8abg0ejpmu5qr0.apps.googleusercontent.com"
    />
  </head>

  <body>
    <script> 
      async function onSignIn(googleUser) {
        var id_token = googleUser.getAuthResponse().id_token;
        const url = 'http://localhost:1234/api/sendGoogleId'; // site that doesnâ€™t send Access-Control-*
        var response = fetch(url, {
          method: 'POST',
          headers: {
            Accept: 'application/json',
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            token: id_token,
          })
        })

        response.then(() => document.body.classList.toggle("logged-in", true));

      }
    </script>
     <script type="text/javascript" src="src/index.js"></script>
    <main>
      <h1 id="lock"></h1>
      <div id="login-page" class="login-page">
        <div class="form">
          <div class="login-form">
            <h1 class="form-title">Secure Chart Viewer</h1>
            <div class="g-signin2 googleButton" data-onsuccess="onSignIn"></div>
          </div>
        </div>
      </div>
      <div class="chart-container">
        <div id="chart"></div>
      </div>
    </main>
  </body>
</html>
